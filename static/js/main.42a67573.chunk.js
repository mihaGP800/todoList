(this.webpackJsonptodo16v2=this.webpackJsonptodo16v2||[]).push([[0],{126:function(t,e,a){},127:function(t,e,a){},153:function(t,e,a){"use strict";a.r(e);var n,i,s=a(0),o=a.n(s),r=a(34),c=a.n(r),d=(a(126),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,219)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,s=e.getLCP,o=e.getTTFB;a(t),n(t),i(t),s(t),o(t)}))}),l=(a(127),a(25)),u=a(33),j=a.n(u),f=a(46),b=a(24),h=a(97),p=a.n(h).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"f3f54432-d8c8-49d7-98bb-7ebfd06f7be2"}}),O=function(){return p.get("todo-lists")},m=function(t){return p.post("todo-lists",{title:t})},g=function(t){return p.delete("todo-lists/".concat(t))},v=function(t,e){return p.put("todo-lists/".concat(t),{title:e})},x=function(t){return p.get("todo-lists/".concat(t,"/tasks"))},k=function(t,e){return p.delete("todo-lists/".concat(t,"/tasks/").concat(e))},C=function(t,e){return p.post("todo-lists/".concat(t,"/tasks"),{title:e})},T=function(t,e,a){return p.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},y=function(t){return p.post("auth/login",t)},I=function(){return p.get("auth/me")},A=function(){return p.delete("auth/login")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var w=function(t,e){t.messages.length?e(U({error:t.messages[0]})):e(U({error:"Some error occurred"})),e(R({status:"failed"}))},S=function(t,e){e(U({error:t.message?t.message:"Some error occurred"})),e(R({status:"failed"}))},F=a(29),L=Object(F.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}},extraReducers:function(t){t.addCase(N.fulfilled,(function(t,e){t.isLoggedIn=e.payload.isLoggedIn}))}}),E=L.reducer,P=L.actions.setIsLoggedInAC,N=Object(F.b)("auth/login",function(){var t=Object(f.a)(j.a.mark((function t(e,a){var n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(R({status:"loading"})),t.prev=1,t.next=4,y(e);case 4:if(0!==(n=t.sent).data.resultCode){t.next=10;break}return a.dispatch(R({status:"succeeded"})),t.abrupt("return",{isLoggedIn:!0});case 10:return w(n.data,a.dispatch),t.abrupt("return",a.rejectWithValue({errors:n.data.messages,fieldsErrors:n.data.fieldsErrors}));case 12:t.next=19;break;case 14:return t.prev=14,t.t0=t.catch(1),i=t.t0,S(i,a.dispatch),t.abrupt("return",a.rejectWithValue({errors:[i.message],fieldsErrors:void 0}));case 19:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e,a){return t.apply(this,arguments)}}()),D=Object(F.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setAppIsInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),z=D.reducer,M=D.actions,R=M.setAppStatusAC,U=M.setAppErrorAC,q=M.setAppIsInitializedAC,B=Object(F.c)({name:"todoLists",initialState:[],reducers:{removeTodolistAC:function(t,e){return t.filter((function(t){return t.id!==e.payload.id}))},addTodolistAC:function(t,e){t.unshift(Object(b.a)(Object(b.a)({},e.payload.todolist),{},{entityStatus:"idle",filter:"all"}))},changeTodolistTitleAC:function(t,e){var a=e.payload,n=a.id,i=a.title,s=t.findIndex((function(t){return t.id===n}));t[s].title=i},changeTodolistFilterAC:function(t,e){var a=e.payload,n=a.id,i=a.filter,s=t.findIndex((function(t){return t.id===n}));t[s].filter=i},changeTodolistEntityStatusAC:function(t,e){var a=e.payload,n=a.id,i=a.status,s=t.findIndex((function(t){return t.id===n}));t[s].entityStatus=i},setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(b.a)(Object(b.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},resetTodolistsAC:function(t,e){return[]}}}),H=B.reducer,V=B.actions,Z=V.removeTodolistAC,J=V.addTodolistAC,K=V.changeTodolistTitleAC,W=V.changeTodolistFilterAC,_=V.changeTodolistEntityStatusAC,G=V.setTodolistsAC,Y=V.resetTodolistsAC,$=Object(F.c)({name:"tasks",initialState:{},reducers:{addTaskAC:function(t,e){t[e.payload.todoListId].unshift(e.payload)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));-1!==n&&(a[n]=Object(b.a)(Object(b.a)({},a[n]),e.payload.model))}},extraReducers:function(t){t.addCase(J,(function(t,e){t[e.payload.todolist.id]=[]})).addCase(Z,(function(t,e){delete t[e.payload.id]})).addCase(G,(function(t,e){e.payload.todolists.forEach((function(e){return t[e.id]=[]}))})).addCase(at.fulfilled,(function(t,e){t[e.payload.todolistId]=e.payload.tasks})).addCase(nt.fulfilled,(function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));-1!==n&&a.splice(n,1)}))}}),Q=$.reducer,X=$.actions,tt=X.addTaskAC,et=X.updateTaskAC,at=Object(F.b)("tasks/fetchTasks",function(){var t=Object(f.a)(j.a.mark((function t(e,a){var n,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(R({status:"loading"})),t.next=3,x(e);case 3:return n=t.sent,i=n.data.items,a.dispatch(R({status:"succeeded"})),t.abrupt("return",{tasks:i,todolistId:e});case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),nt=Object(F.b)("tasks/removeTask",function(){var t=Object(f.a)(j.a.mark((function t(e,a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(R({status:"loading"})),t.next=3,k(e.todolistId,e.taskId);case 3:return a.dispatch(R({status:"succeeded"})),t.abrupt("return",Object(b.a)({},e));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),it=function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var o=Object(b.a)({deadline:s.deadline,description:s.description,priority:s.priority,startDate:s.startDate,title:s.title,status:s.status},e);T(a,t,o).then((function(i){if(0===i.data.resultCode){var s=et({taskId:t,model:e,todolistId:a});n(s)}else w(i.data,n)})).catch((function(t){S(t,n)}))}else console.warn("task not found in the state")}},st=a(99),ot=a(98),rt=Object(st.a)({tasks:Q,todolists:H,app:z,auth:E}),ct=Object(F.a)({reducer:rt,middleware:function(t){return t().prepend(ot.a)}}),dt=l.c;window.store=ct;var lt=a(207),ut=a(215),jt=a(13),ft=a(200),bt=a(208),ht=a(196),pt=a(1),Ot=o.a.memo((function(t){var e=t.addItem,a=t.disabled,n=void 0!==a&&a;console.log("AddItemForm called");var i=Object(s.useState)(""),o=Object(jt.a)(i,2),r=o[0],c=o[1],d=Object(s.useState)(null),l=Object(jt.a)(d,2),u=l[0],j=l[1],f=function(){""!==r.trim()?(e(r),c("")):j("Title is required")};return Object(pt.jsxs)("div",{children:[Object(pt.jsx)(ft.a,{variant:"outlined",disabled:n,error:!!u,value:r,onChange:function(t){c(t.currentTarget.value)},onKeyPress:function(t){null!==u&&j(null),13===t.charCode&&f()},label:"Title",helperText:u}),Object(pt.jsx)(bt.a,{color:"primary",onClick:f,disabled:n,children:Object(pt.jsx)(ht.a,{})})]})})),mt=a(107),gt=o.a.memo((function(t){console.log("EditableSpan called");var e=Object(s.useState)(!1),a=Object(jt.a)(e,2),n=a[0],i=a[1],o=Object(s.useState)(t.value),r=Object(jt.a)(o,2),c=r[0],d=r[1];return n?Object(pt.jsx)(ft.a,{value:c,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.onChange(c)}}):Object(pt.jsx)("span",{onDoubleClick:function(){i(!0),d(t.value)},children:t.value})})),vt=a(209),xt=a(197),kt=a(202),Ct=o.a.memo((function(t){var e=Object(s.useCallback)((function(){return t.removeTask(t.task.id,t.todolistId)}),[t.task.id,t.todolistId]),a=Object(s.useCallback)((function(e){var a=e.currentTarget.checked;t.changeTaskStatus(t.task.id,a?n.Completed:n.New,t.todolistId)}),[t.task.id,t.todolistId]),i=Object(s.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todolistId)}),[t.task.id,t.todolistId]);return Object(pt.jsxs)("div",{className:t.task.status===n.Completed?"is-done":"",children:[Object(pt.jsx)(kt.a,{checked:t.task.status===n.Completed,color:"primary",onChange:a}),Object(pt.jsx)(gt,{value:t.task.title,onChange:i}),Object(pt.jsx)(bt.a,{onClick:e,children:Object(pt.jsx)(xt.a,{})})]},t.task.id)})),Tt=o.a.memo((function(t){t.demo;var e=Object(mt.a)(t,["demo"]);console.log("Todolist called");var a=Object(s.useCallback)((function(t){e.addTask(t,e.todolist.id)}),[e.addTask,e.todolist.id]),i=Object(s.useCallback)((function(t){e.changeTodolistTitle(e.todolist.id,t)}),[e.todolist.id,e.changeTodolistTitle]),o=Object(s.useCallback)((function(){return e.changeFilter("all",e.todolist.id)}),[e.todolist.id,e.changeFilter]),r=Object(s.useCallback)((function(){return e.changeFilter("active",e.todolist.id)}),[e.todolist.id,e.changeFilter]),c=Object(s.useCallback)((function(){return e.changeFilter("completed",e.todolist.id)}),[e.todolist.id,e.changeFilter]),d=e.tasks;return"active"===e.todolist.filter&&(d=e.tasks.filter((function(t){return t.status===n.New}))),"completed"===e.todolist.filter&&(d=e.tasks.filter((function(t){return t.status===n.Completed}))),Object(pt.jsxs)("div",{children:[Object(pt.jsxs)("h3",{children:[Object(pt.jsx)(gt,{value:e.todolist.title,onChange:i}),Object(pt.jsx)(bt.a,{onClick:function(){e.removeTodolist(e.todolist.id)},disabled:"loading"===e.todolist.entityStatus,children:Object(pt.jsx)(xt.a,{})})]}),Object(pt.jsx)(Ot,{addItem:a,disabled:"loading"===e.todolist.entityStatus}),Object(pt.jsx)("div",{children:d.map((function(t){return Object(pt.jsx)(Ct,{task:t,todolistId:e.todolist.id,removeTask:e.removeTask,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus},t.id)}))}),Object(pt.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(pt.jsx)(vt.a,{variant:"all"===e.todolist.filter?"outlined":"text",onClick:o,color:"inherit",children:"All"}),Object(pt.jsx)(vt.a,{variant:"active"===e.todolist.filter?"outlined":"text",onClick:r,color:"primary",children:"Active"}),Object(pt.jsx)(vt.a,{variant:"completed"===e.todolist.filter?"outlined":"text",onClick:c,color:"secondary",children:"Completed"})]})]})})),yt=a(14),It=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(l.c)((function(t){return t.todolists})),i=Object(l.c)((function(t){return t.tasks})),o=dt((function(t){return t.auth.isLoggedIn})),r=Object(l.b)(),c=Object(yt.g)();Object(s.useEffect)((function(){o?r((function(t){t(R({status:"loading"})),O().then((function(e){return t(G({todolists:e.data})),t(R({status:"succeeded"})),e.data})).then((function(e){e.forEach((function(e){return t(at(e.id))}))}))})):c("/login")}),[o]);var d=Object(s.useCallback)((function(t,e){var a=nt({taskId:t,todolistId:e});r(a)}),[]),u=Object(s.useCallback)((function(t,e){var a=function(t,e){return function(a){a(R({status:"loading"})),C(e,t).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item,n=tt(e);a(n),a(R({status:"succeeded"}))}else w(t.data,a)})).catch((function(t){S(t,a)}))}}(t,e);r(a)}),[]),j=Object(s.useCallback)((function(t,e,a){var n=it(t,{status:e},a);r(n)}),[]),f=Object(s.useCallback)((function(t,e,a){var n=it(t,{title:e},a);r(n)}),[]),b=Object(s.useCallback)((function(t,e){var a=W({id:e,filter:t});r(a)}),[]),h=Object(s.useCallback)((function(t){var e,a=(e=t,function(t){t(R({status:"loading"})),t(_({id:e,status:"loading"})),g(e).then((function(a){t(Z({id:e})),t(R({status:"succeeded"}))}))});r(a)}),[]),p=Object(s.useCallback)((function(t,e){var a=function(t,e){return function(a){v(t,e).then((function(n){a(K({id:t,title:e}))}))}}(t,e);r(a)}),[]),x=Object(s.useCallback)((function(t){var e=function(t){return function(e){e(R({status:"loading"})),m(t).then((function(t){0===t.data.resultCode?(e(J({todolist:t.data.data.item})),e(R({status:"succeeded"}))):w(t.data,e)})).catch((function(t){S(t,e)}))}}(t);r(e)}),[r]);return Object(pt.jsxs)(pt.Fragment,{children:[Object(pt.jsx)(lt.a,{container:!0,style:{padding:"20px"},children:Object(pt.jsx)(Ot,{addItem:x})}),Object(pt.jsx)(lt.a,{container:!0,spacing:3,children:n.map((function(t){var e=i[t.id];return Object(pt.jsx)(lt.a,{item:!0,children:Object(pt.jsx)(ut.a,{style:{padding:"10px"},children:Object(pt.jsx)(Tt,{todolist:t,tasks:e,removeTask:d,changeFilter:b,addTask:u,changeTaskStatus:j,removeTodolist:h,changeTaskTitle:f,changeTodolistTitle:p,demo:a})})},t.id)}))})]})},At=a(211),wt=a(212),St=a(210),Ft=a(214),Lt=a(213),Et=a(199),Pt=a(204),Nt=a(203),Dt=o.a.forwardRef((function(t,e){return Object(pt.jsx)(Nt.a,Object(b.a)({elevation:6,ref:e,variant:"filled"},t))}));function zt(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&e(U({error:null}))};return Object(pt.jsx)(Pt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(pt.jsx)(Dt,{onClose:a,severity:"error",sx:{width:"100%"},children:t})})}var Mt=a(205),Rt=a(217),Ut=a(216),qt=a(194),Bt=a(106),Ht=function(){var t=Object(l.b)(),e=dt((function(t){return t.auth.isLoggedIn})),a=Object(Bt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password.trim()?t.password.trim().length<=3&&(e.password="Must be 3 characters or more"):e.password="Required",e},onSubmit:function(){var e=Object(f.a)(j.a.mark((function e(n,i){var s,o,r,c,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(N(n));case 2:s=e.sent,N.rejected.match(s)&&(null===(o=s.payload)||void 0===o||null===(r=o.fieldsErrors)||void 0===r?void 0:r.length)&&(d=null===(c=s.payload)||void 0===c?void 0:c.fieldsErrors[0],i.setFieldError(d.field,d.error)),a.resetForm();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()});return e?Object(pt.jsx)(yt.a,{to:"/"}):Object(pt.jsx)(lt.a,{container:!0,justifyContent:"center",children:Object(pt.jsx)(lt.a,{item:!0,justifyContent:"center",children:Object(pt.jsxs)(Mt.a,{children:[Object(pt.jsxs)(qt.a,{children:[Object(pt.jsxs)("p",{children:["To log in get registered",Object(pt.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(pt.jsx)("p",{children:"or use common test account credentials:"}),Object(pt.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(pt.jsx)("p",{children:"Password: free"})]}),Object(pt.jsx)("form",{onSubmit:a.handleSubmit,children:Object(pt.jsxs)(Ut.a,{children:[Object(pt.jsx)(ft.a,Object(b.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email&&Object(pt.jsx)("div",{style:{color:"red"},children:a.errors.email}),Object(pt.jsx)(ft.a,Object(b.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.email&&Object(pt.jsx)("div",{style:{color:"red"},children:a.errors.password}),Object(pt.jsx)(Rt.a,{label:"Remember me",control:Object(pt.jsx)(kt.a,Object(b.a)({checked:a.values.rememberMe},a.getFieldProps("rememberMe")))}),Object(pt.jsx)(vt.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})},Vt=a(218);var Zt=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(l.c)((function(t){return t.app.status})),i=dt((function(t){return t.app.isInitialized})),o=dt((function(t){return t.auth.isLoggedIn})),r=Object(l.b)();return Object(s.useEffect)((function(){r((function(t){t(R({status:"loading"})),I().then((function(e){0===e.data.resultCode?(t(P({value:!0})),t(R({status:"succeeded"}))):w(e.data,t)})).catch((function(e){S(e,t)})).finally((function(){return t(q({isInitialized:!0}))}))}))}),[]),i?Object(pt.jsxs)("div",{className:"App",children:[Object(pt.jsx)(zt,{}),Object(pt.jsxs)(At.a,{position:"static",children:[Object(pt.jsxs)(wt.a,{children:[Object(pt.jsx)(bt.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(pt.jsx)(Et.a,{})}),Object(pt.jsx)(St.a,{variant:"h6",children:"News"}),o&&Object(pt.jsx)(vt.a,{color:"inherit",onClick:function(){return r((function(t){t(R({status:"loading"})),A().then((function(e){0===e.data.resultCode?(t(P({value:!1})),t(R({status:"succeeded"})),t(Y())):w(e.data,t)})).catch((function(e){S(e,t)}))}))},children:"LogOUT"})]}),"loading"===n&&Object(pt.jsx)(Lt.a,{})]}),Object(pt.jsx)(Ft.a,{fixed:!0,children:Object(pt.jsxs)(yt.d,{children:[Object(pt.jsx)(yt.b,{path:"/",element:Object(pt.jsx)(It,{demo:a})}),Object(pt.jsx)(yt.b,{path:"/login",element:Object(pt.jsx)(Ht,{})}),Object(pt.jsx)(yt.b,{path:"/404",element:Object(pt.jsx)("h1",{style:{textAlign:"center"},children:"404: PAGE NOT FOUND"})}),Object(pt.jsx)(yt.b,{path:"/*",element:Object(pt.jsx)(yt.a,{to:"/404"})})]})})]}):Object(pt.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(pt.jsx)(Vt.a,{})})},Jt=a(55);c.a.render(Object(pt.jsx)(o.a.StrictMode,{children:Object(pt.jsx)(Jt.a,{children:Object(pt.jsx)(l.a,{store:ct,children:Object(pt.jsx)(Zt,{})})})}),document.getElementById("root")),d()}},[[153,1,2]]]);
//# sourceMappingURL=main.42a67573.chunk.js.map